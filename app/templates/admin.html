<h2>Admin Dashboard</h2>

<h3>All Patients</h3>
<ul>
  {% for patient in patients %}
    <li>{{ patient.name }} ({{ patient.email }})</li>
  {% endfor %}
</ul>

<hr>

<h3>Pending Appointments</h3>
{% for app in pending_appointments %}
  <form method="POST">
    <input type="hidden" name="app_id" value="{{ app.id }}">
    <p>Patient: {{ app.patient.name }}</p>
    <p>Date: {{ app.date }}</p>
    <p>Time: {{ app.time }}</p>
    <p>Status: {{ app.status }}</p>

    <label>Dentist:</label>
    <select name="dentist" required>
      {% for d in doctors %}
        <option value="{{ d.id }}">{{ d.name }}</option>
      {% endfor %}
    </select>

    <label>Message:</label>
    <textarea name="message">{{ app.message }}</textarea>

    <button type="submit">Save</button>
  </form>
{% else %}
  <p>No pending appointments.</p>
{% endfor %}

<hr>

<h3>Approved Appointments</h3>
{% for app in approved_appointments %}
  <form method="POST">
    <input type="hidden" name="app_id" value="{{ app.id }}">
    <p>Patient: {{ app.patient.name }}</p>
    <p>Date: {{ app.date }}</p>
    <p>Time: {{ app.time }}</p>
    <p>Status: {{ app.status }}</p>
    <p>Dentist: {{ app.dentist }}</p>

    <label>Message:</label>
    <textarea name="message">{{ app.message }}</textarea>

    <button type="submit">Update Message</button>
  </form>
{% else %}
  <p>No approved appointments.</p>
{% endfor %}

<hr>

<h3>Add New Doctor</h3>
<form method="POST">
  <input type="hidden" name="add_doctor" value="1">
  <input type="text" name="name" placeholder="Doctor Name" required>
  <input type="email" name="email" placeholder="Doctor Email" required>
  <input type="password" name="password" placeholder="Password" required>
  <button type="submit">Add Doctor</button>
</form>
